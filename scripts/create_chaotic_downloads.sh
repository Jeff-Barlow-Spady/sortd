#!/bin/bash

# Create a realistic chaotic downloads folder for testing sortd
TEST_DIR="$HOME/mock_filesystem_playground/realistic_test"
DOWNLOADS="$TEST_DIR/Downloads"

echo "ðŸš€ Creating chaotic Downloads folder at $DOWNLOADS"

# Clean up existing folder
rm -rf "$DOWNLOADS"
mkdir -p "$DOWNLOADS"

# Create document files
echo "Creating document files..."
echo "This is a text file" > "$DOWNLOADS/notes.txt"
echo "This is a PDF document" > "$DOWNLOADS/resume.pdf"
echo "This is a Word document" > "$DOWNLOADS/report.docx"
echo "This is a markdown file" > "$DOWNLOADS/README.md"
echo "This is another PDF" > "$DOWNLOADS/invoice_2024.pdf"
echo "This is a duplicate file" > "$DOWNLOADS/report (copy).docx"

# Create image files
echo "Creating image files..."
# Create a minimal JPEG
printf "\xFF\xD8\xFF\xE0\x00\x10\x4A\x46\x49\x46\x00\x01\x01\x01\x00\x48\x00\x48\x00\x00\xFF\xDB\x00\x43\x00\xFF\xC4\x00\x1F\x00\x00\x01\x05\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0A\x0B\xFF\xDA\x00\x08\x01\x01\x00\x01\x3F\x10\x28\xA2\x8A\xFF\xD9" > "$DOWNLOADS/vacation.jpg"
printf "\xFF\xD8\xFF\xE0\x00\x10\x4A\x46\x49\x46\x00\x01\x01\x01\x00\x48\x00\x48\x00\x00\xFF\xDB\x00\x43\x00\xFF\xC4\x00\x1F\x00\x00\x01\x05\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0A\x0B\xFF\xDA\x00\x08\x01\x01\x00\x01\x3F\x10\x28\xA2\x8A\xFF\xD9" > "$DOWNLOADS/profile.jpg"

# Create a minimal PNG
echo -n -e '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x02\x00\x00\x00\x90wS\xde\x00\x00\x00\x0cIDATx\x9cc```\x00\x00\x00\x04\x00\x01\xf6\x178U\x00\x00\x00\x00IEND\xaeB`\x82' > "$DOWNLOADS/screenshot.png"

# Create a minimal GIF
echo -n -e 'GIF89a\x01\x00\x01\x00\x80\x00\x00\xFF\xFF\xFF\x00\x00\x00!\xF9\x04\x00\x00\x00\x00\x00,\x00\x00\x00\x00\x01\x00\x01\x00\x00\x02\x02D\x01\x00;' > "$DOWNLOADS/animation.gif"

# Create archive files
echo "Creating archive files..."
# Create a minimal ZIP
echo -n -e 'PK\x03\x04\x0A\x00\x00\x00\x00\x00\x00\x00!\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00PK\x01\x02\x14\x00\x0A\x00\x00\x00\x00\x00\x00\x00!\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00PK\x05\x06\x00\x00\x00\x00\x01\x00\x01\x00.\x00\x00\x00\x1C\x00\x00\x00\x00\x00' > "$DOWNLOADS/backup.zip"
echo -n -e 'PK\x03\x04\x0A\x00\x00\x00\x00\x00\x00\x00!\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00PK\x01\x02\x14\x00\x0A\x00\x00\x00\x00\x00\x00\x00!\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00PK\x05\x06\x00\x00\x00\x00\x01\x00\x01\x00.\x00\x00\x00\x1C\x00\x00\x00\x00\x00' > "$DOWNLOADS/photos.zip"

# Create a minimal TAR.GZ
echo -n -e '\x1F\x8B\x08\x00\x00\x00\x00\x00\x00\x03\xEB\xCE\xCC\xCD\xE3\x02\x00\xA1\x93\x2A\x37\x05\x00\x00\x00' > "$DOWNLOADS/data.tar.gz"

# Create media files
echo "Creating media files..."
# Create a minimal MP3
echo -n -e 'ID3\x03\x00\x00\x00\x00\x00#TALB\x00\x00\x00\x0F\x00\x00\x03Sample Album\x00TCON\x00\x00\x00\x0B\x00\x00\x03Rock\x00\x00\xFF\xFB\x90\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' > "$DOWNLOADS/song.mp3"

# Create a minimal MP4
echo -n -e '\x00\x00\x00\x18\x66\x74\x79\x70\x6D\x70\x34\x32\x00\x00\x00\x00\x69\x73\x6F\x6D\x6D\x70\x34\x32\x00\x00\x00\x01\x6D\x6F\x6F\x76\x00\x00\x00\x6C\x6D\x76\x68\x64' > "$DOWNLOADS/video.mp4"

# Create code files
echo "Creating code files..."
cat > "$DOWNLOADS/script.py" << EOL
#!/usr/bin/env python3
# Sample Python script
print("Hello, world!")
EOL

cat > "$DOWNLOADS/index.html" << EOL
<!DOCTYPE html>
<html>
<head><title>Test</title></head>
<body><h1>Hello World</h1></body>
</html>
EOL

cat > "$DOWNLOADS/styles.css" << EOL
body { font-family: Arial; }
h1 { color: blue; }
EOL

cat > "$DOWNLOADS/config.json" << EOL
{
  "name": "Test Config",
  "version": "1.0.0"
}
EOL

cat > "$DOWNLOADS/setup.sh" << EOL
#!/bin/bash
echo "Setup script"
exit 0
EOL
chmod +x "$DOWNLOADS/setup.sh"

# Create files with weird names and spaces
echo "Creating files with special characters and spaces..."
echo "Special file content" > "$DOWNLOADS/File with spaces.txt"
echo "Invoice content" > "$DOWNLOADS/Invoice #1234 (2024).pdf"
echo "Special @ characters" > "$DOWNLOADS/Special @ Chars & Symbols.txt"

# Create temporary files
echo "Creating temporary files..."
echo "Temporary content" > "$DOWNLOADS/temp123.tmp"
echo "Partial download" > "$DOWNLOADS/download.part"

echo "âœ… Created chaotic Downloads folder with various file types at $DOWNLOADS"
